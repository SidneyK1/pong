!function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const s=new Phaser.Game({height:830,width:500,renderer:Phaser.CANVAS,scaleMode:Phaser.ScaleManager.SHOW_ALL,parent:"container",alignH:!0,alignV:!0});s.state.add("welcome",class{preload(){this.game.load.image("Court","./assets/background2.jpg"),this.load.spritesheet("singlePlayerButton","./assets/button_einzelspieler.png",166,40),this.load.spritesheet("multiPlayerButton","./assets/button_mehrspieler.png",162,40),this.load.spritesheet("control","./assets/button_steuerung.png",142,40)}create(){this.add.image(0,0,"Court"),this.add.button(this.world.centerX-90,480,"singlePlayerButton",this.startSinglePlayer,this,2,1,0),this.add.button(this.world.centerX-88,550,"multiPlayerButton",this.startMultiPlayer,this,2,1,0),this.add.button(this.game.world.centerX-77,this.game.world.centerY+240,"control",this.showControls,this,2,1,0),this.game.add.text(this.world.centerX-95,130,"PONG",{font:"64px Arial",fill:"#fff",algin:"center"})}update(){}startSinglePlayer(){localStorage.setItem("pongMultiplayer",0),this.state.start("chooseDifficulty")}startMultiPlayer(){localStorage.setItem("pongMultiplayer",1),this.state.start("chooseDifficulty")}showControls(){this.state.start("controls")}}),s.state.add("game",class{preload(){this.game.load.image("paddle","./assets/paddle.png"),this.game.load.image("tennisball","./assets/tennisball.png"),this.game.load.image("Court","./assets/background2.jpg"),this.game.load.spritesheet("startButton","./assets/play-button.png"),this.game.load.spritesheet("specialItem","./assets/specialItem.png"),this.game.load.audio("GameSetMatch","./assets/sound.mp3")}createPlayer(e,t){const a=this.game.add.sprite(e,t,"paddle");return a.anchor.setTo(.5,.5),this.game.physics.arcade.enable(a),a.body.collideWorldBounds=!0,a.body.immovable=!0,"hard"===this.difficulty?a.scale.setTo(.3,.3):a.scale.setTo(.35,.35),a}createBall(e,t){const a=this.game.add.sprite(e,t,"tennisball");return a.anchor.setTo(.5,.5),this.game.physics.arcade.enable(a),a.body.collideWorldBounds=!0,a.body.bounce.setTo(1,1),a.scale.setTo(.2,.2),a}resetBall(){this.ball.x=this.game.world.centerX,this.ball.y=this.game.world.centerY,this.ball.body.velocity.setTo(0,0),this.ballLaunched=!1,this.game.time.events.add(1*Phaser.Timer.SECOND,this.launchBall.bind(this))}launchBall(){this.multiplayer||(this.player2.body.maxVelocity.x=250),this.ball.body.velocity.setTo(-this.ballVelocity,this.player1HasServe?-this.ballVelocity:this.ballVelocity),this.ballLaunched=!0,this.playButton.pendingDestroy=!0}create(){this.game.input.addPointer(),this.game.input.addPointer(),this.difficulty=localStorage.getItem("difficulty"),this.add.image(0,0,"Court"),this.multiplayer=parseInt(localStorage.getItem("pongMultiplayer")),this.ballLaunched=!1,"hard"===this.difficulty?this.ballVelocity=600:this.ballVelocity=500,this.player1=this.createPlayer(this.game.world.centerX,this.game.world.height),this.player2=this.createPlayer(this.game.world.centerX,0),this.ball=this.createBall(this.game.world.centerX,this.game.world.centerY),this.player1HasServe=!0,this.playButton=this.add.button(this.world.centerX-40,this.world.centerY-40,"startButton",this.launchBall,this,2,1,0),this.player1Controls={left:this.game.input.keyboard.addKey(Phaser.Keyboard.A),right:this.game.input.keyboard.addKey(Phaser.Keyboard.S)},this.player2Controls={left:this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)},this.player1ScoreText=this.game.add.text(35,this.game.world.height-390,"0",{font:"64px Arial",fill:"#EC0909",algin:"center"}),this.player2ScoreText=this.game.add.text(35,275,"0",{font:"64px Arial",fill:"#EC0909",algin:"center"}),this.player2ScoreText.scale.setTo(1.5,1.5),this.player1ScoreText.scale.setTo(1.5,1.5),this.scorePlayer1=0,this.scorePlayer2=0}isTouchInputActive(){return this.game.input.mousePointer.isDown||this.game.input.pointer1.isDown||this.game.input.pointer2.isDown||this.game.input.pointer3.isDown||this.game.input.pointer4.isDown}movePlayerByTouch(){const e=!this.multiplayer||this.game.input.y>this.game.world.centerY?this.player1:this.player2;this.game.input.x<this.game.world.centerX?e.body.velocity.x=-500:e.body.velocity.x=500}movePlayerByKeyboard(e){const t=e===this.player1?this.player1Controls:this.player2Controls;t.left.isDown?e.body.velocity.x=-400:t.right.isDown?e.body.velocity.x=400:e.body.velocity.x=0}addSpecialItemByChance(){const e=this.game.rnd.integerInRange(0,1e7);this.specialItem&&this.specialItem.visible||e%7!=0||e%3!=0||e%13!=0||(this.specialItem=this.game.add.sprite(this.game.rnd.integerInRange(42,451),this.game.rnd.integerInRange(45,787),"specialItem"),this.specialItem.scale.setTo(.06,.06),this.game.physics.arcade.enable(this.specialItem))}update(){this.isTouchInputActive()?this.movePlayerByTouch():(this.movePlayerByKeyboard(this.player1),this.multiplayer&&this.movePlayerByKeyboard(this.player2)),this.game.physics.arcade.collide(this.player1,this.ball),this.game.physics.arcade.collide(this.player2,this.ball),this.ball.body.blocked.down?(this.scorePlayer2+=1,this.player1HasServe=!0,this.resetBall()):this.ball.body.blocked.up&&(this.scorePlayer1+=1,this.player1HasServe=!1,this.resetBall()),this.checkGameOver(),this.multiplayer||(this.player2.body.velocity.setTo(this.ball.body.velocity.x),this.player2.body.velocity.y=0,this.player2.body.maxVelocity.x=250),this.player1ScoreText.text=this.scorePlayer1,this.player2ScoreText.text=this.scorePlayer2,parseInt(localStorage.getItem("itemsEnabled"))&&this.ballLaunched&&(this.addSpecialItemByChance(),this.specialItem&&this.game.physics.arcade.overlap(this.ball,this.specialItem,this.handleSpecialItemOverlap.bind(this)))}handleSpecialItemOverlap(){const e=this.ball.body.velocity;this.ball.body.velocity.setTo(e.x>0?e.x+200:e.x-200,e.y>0?e.y+200:e.y-200),this.multiplayer||(this.player2.body.maxVelocity.x=320),this.specialItem.pendingDestroy=!0,this.game.time.events.add(2.5*Phaser.Timer.SECOND,()=>{if(!this.ball.body.velocity.x>this.ballVelocity){const e=this.ball.body.velocity;this.ball.body.velocity.setTo(e.x>0?e.x-200:e.x+200,e.y>0?e.y-200:e.y+200),!this.multiplayer&&this.player2.body.maxVelocity.x>250&&(this.player2.body.maxVelocity.x=250)}},this)}checkGameOver(){6===this.scorePlayer1&&(localStorage.setItem("winner","Spieler 1"),localStorage.setItem("gameResult",`{ "player1":  ${this.scorePlayer1}, "player2": ${this.scorePlayer2}}`),this.game.sound.play("GameSetMatch"),this.game.state.start("gameover")),6===this.scorePlayer2&&(localStorage.setItem("winner","Spieler 2"),localStorage.setItem("gameResult",`{ "player1":  ${this.scorePlayer1}, "player2": ${this.scorePlayer2}}`),this.game.sound.play("GameSetMatch"),this.game.state.start("gameover"))}}),s.state.add("gameover",class{preload(){this.game.load.image("Court","./assets/background2.jpg"),this.load.spritesheet("returnToHome","./assets/button_hauptmenu.png",157,40),this.load.spritesheet("playAgain","./assets/button_neues-spiel.png",154,40)}create(){this.add.image(0,0,"Court"),this.add.button(this.world.centerX-80,550,"returnToHome",this.returnToHome,this,2,1,0),this.add.button(this.world.centerX-80,460,"playAgain",this.playsameAgain,this,2,1,0);const e=localStorage.getItem("winner"),t=JSON.parse(localStorage.getItem("gameResult"));t.player1,t.player2,this.game.add.text(80,90,`      ${e} \n hat gewonnen`,{font:"48px Arial",fill:"#fff",algin:"center"}),this.game.add.text(125,255,`${t.player1} :`,{font:"128px Arial",fill:"#EC0909"}),this.game.add.text(295,255,t.player2,{font:"128px Arial",fill:"#EC0909"})}update(){}returnToHome(){this.state.start("welcome")}playsameAgain(){this.state.start("game")}}),s.state.add("controls",class{preload(){this.game.load.image("BG","./assets/background2.jpg"),this.load.spritesheet("back","./assets/button_zuruck.png",108,40),this.game.load.image("phone","./assets/phone.png"),this.game.load.image("Roger","./assets/roger3.png"),this.game.load.image("Finger","./assets/finger2.png")}create(){this.add.image(0,0,"BG"),this.add.image(this.world.centerX-320,250,"Roger"),this.add.image(10,250,"phone");const e=this.add.image(80,450,"Finger");this.add.button(this.world.centerX-150,660,"back",this.goBack,this,2,1,0),this.game.add.text(this.world.centerX-170,this.world.height-730,"  Spieler 1: A und S\n  Spieler 2: Pfeiltasten\n  oder Touch-Eingabe",{font:"64px Arial",fill:"#ffffff",algin:"center"}).scale.setTo(.5,.5),e.scale.setTo(.4,.4)}update(){}goBack(){this.state.start("welcome")}}),s.state.add("chooseDifficulty",class{preload(){this.load.spritesheet("HardB","./assets/button_hardcore.png",146,54),this.load.spritesheet("NormalB","./assets/button_normal.png",128,54),this.game.load.image("BG","./assets/background2.jpg"),this.load.spritesheet("enableItems","./assets/button_items-ein.png",158,52),this.load.spritesheet("disableItems","./assets/button_items-aus.png",159,52)}create(){localStorage.setItem("itemsEnabled",1),this.add.image(0,0,"BG"),this.enableItemsBtn=this.add.button(175,670,"enableItems",this.enableItems,this,2,1,0);const e=this.add.button(170,450,"NormalB",this.goNormal,this,2,1,0),t=this.add.button(160,550,"HardB",this.goHard,this,2,1,0);e.scale.setTo(1.2,1.2),t.scale.setTo(1.2,1.2),this.game.add.text(80,90,"       WÃ¤hle\n Schwierigkeit",{font:"48px Arial",fill:"#fff",algin:"center"})}update(){}goNormal(){localStorage.setItem("difficulty","normal"),this.state.start("game")}goHard(){localStorage.setItem("difficulty","hard"),this.state.start("game")}disbaleItems(){this.enableItemsBtn=this.add.button(175,670,"enableItems",this.enableItems,this,2,1,0),this.disableItemsBtn.pendingDestroy=!0,localStorage.setItem("itemsEnabled",1)}enableItems(){this.disableItemsBtn=this.add.button(175,670,"disableItems",this.disbaleItems,this,2,1,0),this.enableItemsBtn.pendingDestroy=!0,localStorage.setItem("itemsEnabled",0)}}),s.state.start("welcome")}]);